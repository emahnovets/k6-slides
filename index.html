<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Efficient API load testing with k6</title>

  <link rel="stylesheet" href="/node_modules/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="/node_modules/reveal.js/dist/theme/night.css">
  <link rel="stylesheet" href="./styles/theme.css">
  <link rel="stylesheet" href="/node_modules/shades-of-purple-highlightjs/theme/shades-of-purple.css">
  <link rel="stylesheet" href="./styles/slides/final.css">
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section data-timing="20" id="w">
        <h3>ğŸš€ Efficient API load testing with k6</h3>
        <h5 id="author-name"></h5>
      </section>

      <section data-auto-animate>
        <h2>ğŸ¤” What is Performance Testing?</h2>
        <ul>
          <li class="fragment">âš¡ Evaluates system speed and stability</li>
          <li class="fragment">ğŸ” Identifies bottlenecks</li>
          <li class="fragment">ğŸ’ª Ensures reliability under load</li>
          <li class="fragment">ğŸ“‹ Types:
            <ul>
              <li class="fragment">ğŸ‹ï¸ Load</li>
              <li class="fragment">ğŸ˜° Stress</li>
              <li class="fragment">â³ Soak</li>
              <li class="fragment">ğŸ“ˆ Spike</li>
            </ul>
          </li>
        </ul>

        <aside class="notes">
          Performance testing is crucial for modern applications:
          â€¢ Speed and stability evaluation helps ensure good user experience
          â€¢ Bottleneck identification allows early problem detection
          â€¢ Load testing verifies system behavior under expected conditions
          â€¢ Stress testing finds breaking points
          â€¢ Soak testing checks for memory leaks and degradation
          â€¢ Spike testing verifies handling of sudden traffic surges

          These different types of testing give us a complete picture of application performance.
        </aside>
      </section>

      <section data-auto-animate>
        <h2>ğŸ› ï¸ What is k6?</h2>
        <ul>
          <li>ğŸŒŸ Open-source load testing tool</li>
          <li>ğŸ“Š Developed by Grafana Labs</li>
          <li>ğŸ“ JavaScript-based scripting</li>
          <li>ğŸ’» Command-line execution</li>
          <li>ğŸ”„ Designed for CI/CD integration</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>ğŸ¯ Key Features</h2>
        <ul>
          <li>ğŸª¶ Lightweight and efficient</li>
          <li>ğŸ“Š Multiple load profiles</li>
          <li>â˜ï¸ Supports cloud and on-prem execution</li>
          <li>ğŸ“ˆ Built-in metrics and reporting</li>
          <li>ğŸ”Œ Extendable via xk6</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>ğŸ¤¼ k6 vs Other Tools</h2>
        <ul>
          <li><strong>JMeter</strong>: ğŸ–¥ï¸ GUI-based, heavier</li>
          <li><strong>Locust</strong>: ğŸ Python-based, better for distributed tests</li>
          <li><strong>Gatling</strong>: âš¡ Uses Scala, similar scripting capabilities</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>âœ¨ Pros & Cons of k6</h2>
        <div class="side-by-side">
          <div>
            <h3>ğŸ‘ Pros</h3>
            <ul>
              <li>ğŸ“ Easy scripting (JavaScript)</li>
              <li>ğŸª¶ Low resource consumption</li>
              <li>ğŸ¯ Great for API testing</li>
              <li>ğŸ”„ CI/CD-friendly</li>
            </ul>
          </div>
          <div>
            <h3>ğŸ‘ Cons</h3>
            <ul>
              <li>ğŸ–¥ï¸ No GUI (CLI only)</li>
              <li>ğŸš« Limited protocol support</li>
              <li>âºï¸ No record-and-replay feature</li>
            </ul>
          </div>
        </div>
      </section>

      <section data-auto-animate>
        <h2>âš™ï¸ Installing k6</h2>
        <ul>
          <li>ğŸ <code>brew install k6</code> (Mac)</li>
          <li>ğŸªŸ <code>choco install k6</code> (Windows)</li>
          <li>ğŸ³ <code>docker pull grafana/k6</code> (Docker)</li>
        </ul>
      </section>

      <section data-auto-animate>
        <section data-auto-animate>
          <h2>ğŸ“ Writing a Simple Test</h2>
          <pre><code data-line-numbers="1-2|6-9|11-17|12|14|16">import { check, sleep } from "k6";
import http from "k6/http";

const BASE_URL = "https://oychb9mwp5.execute-api.eu-central-1.amazonaws.com";

export const options = {
  vus: 10,
  duration: "30s",
};

export default function () {
  const response = http.get(`${BASE_URL}/health`);

  check(response, { "status is 200": (r) => r.status === 200 });

  sleep(1);
}</code></pre>
          <p>ğŸš€ Run it with: <code>k6 run basic.ts</code></p>
        </section>

        <section data-auto-animate>
          <img src="/basic.png" alt="Basic test" />
        </section>
      </section>

      <section>
        <section data-auto-animate>
          <h2>ğŸ“ˆ Load Scenarios</h2>
          <pre><code data-line-numbers="1-2|5-17|19-25|10-14|9|10|12|13|14">import { check, sleep } from "k6";
import http from "k6/http";

const BASE_URL = "https://oychb9mwp5.execute-api.eu-central-1.amazonaws.com";

export const options = {
  scenarios: {
    ramp_up_down: {
      executor: "ramping-vus",
      startVUs: 0,
      stages: [
        { duration: "2m", target: 100 }, // Ramp up to 100 users
        { duration: "5m", target: 100 }, // Stay at 100 for 5 minutes
        { duration: "2m", target: 0 }, // Ramp down to 0
      ],
    },
  },
};

export default function () {
  const response = http.get(`${BASE_URL}/health`);

  check(response, { "status is 200": (r) => r.status === 200 });

  sleep(1);
}</code></pre>
          <p>ğŸ“Š This test gradually increases load, maintains it, then scales down</p>
          <aside class="notes">
            - First stage ramps from 0 to 100 VUs over 2 minutes
            - Second stage maintains load to gather steady metrics
            - Final stage allows system to recover naturally
            - Great for catching memory leaks and resource issues
          </aside>
        </section>

        <section data-auto-animate>
          <img src="/ramp.png" alt="Ramp test" />
        </section>
      </section>

      <section>
        <section data-auto-animate>
          <h2>ğŸŒ Browser Testing</h2>
          <pre><code data-line-numbers="1-2|4-20|7-9|10-14|17-19|22-36|23-24|27|29-32|34">import { browser } from "k6/browser";
import { check } from "https://jslib.k6.io/k6-utils/1.5.0/index.js";

export const options = {
  scenarios: {
    browser: {
      executor: "constant-vus",
      vus: 1,
      duration: "10s",
      options: {
        browser: {
          type: "chromium",
        },
      },
    },
  },
  thresholds: {
    checks: ["rate==1.0"],
  },
};

export default async function () {
  const context = await browser.newContext();
  const page = await context.newPage();

  try {
    await page.goto("https://todos.demo.emahnovets.dev/");

    await check(page.locator("h1"), {
      "Header is visible": async (header) =>
        (await header.textContent()) === "ToDos",
    });
  } finally {
    page.close();
  }
}</code></pre>
        </section>

        <section data-auto-animate>
          <img src="/browser.png" alt="Browser test" />
        </section>
      </section>

      <section data-auto-animate>
        <h2>ğŸ’¼ Real-World Use Cases</h2>
        <ul>
          <li>ğŸŒ API performance testing</li>
          <li>ğŸš€ Load testing before deployment</li>
          <li>ğŸ”„ CI/CD integration</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>ğŸ”§ Advanced Features</h2>
        <ul>
          <li>ğŸ¯ Thresholds & Alerts</li>
          <li>ğŸ“Š Custom Metrics (Prometheus, Grafana)</li>
          <li>ğŸŒ Distributed Load Testing</li>
          <li>ğŸ“‹ Data-driven tests</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>ğŸ”„ k6 in CI/CD Pipelines</h2>
        <pre><code data-line-numbers>jobs:
  k6-test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Run k6 test
      run: |
        docker run --rm -v $(pwd):/scripts grafana/k6 run /scripts/script.js
          </code></pre>
      </section>

      <section data-auto-animate>
        <h2>ğŸ“Š Reporting & Visualization</h2>
        <ul>
          <li>ğŸ’» CLI summary output</li>
          <li>ğŸ“„ JSON & InfluxDB export</li>
          <li>ğŸ“ˆ Grafana dashboards</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>ğŸ”Œ xk6 Extensions</h2>
        <ul>
          <li>ğŸ“¨ xk6-kafka (Kafka messaging performance testing)</li>
          <li>ğŸ”Œ xk6-websockets (WebSocket support, experimental in k6)</li>
        </ul>
      </section>

      <section data-auto-animate>
        <h2>ğŸ¤” When to Use k6</h2>
        <div class="side-by-side">
          <div>
            <h3>âœ… Use k6 when:</h3>
            <ul>
              <li>ğŸŒ Testing APIs or web applications</li>
              <li>ğŸ”„ Need performance tests in CI/CD</li>
              <li>ğŸ“ Prefer a scriptable tool</li>
            </ul>
          </div>
          <div>
            <h3>âŒ Avoid k6 when:</h3>
            <ul>
              <li>ğŸ–¥ï¸ Need GUI-based scripting</li>
              <li>ğŸš« Require non-HTTP protocol testing</li>
              <li>ğŸŒ Complex UI performance testing</li>
            </ul>
          </div>
        </div>
      </section>

      <section data-auto-animate>
        <h2>ğŸ¯ Conclusion</h2>
        <ul>
          <li>ğŸ’ª k6 is a powerful performance testing tool</li>
          <li>â˜ï¸ Ideal for API and cloud-native testing</li>
          <li>ğŸ”„ Great integration with DevOps pipelines</li>
          <li>ğŸ”Œ Expandable with xk6 extensions</li>
        </ul>
      </section>

      <section data-auto-animate id="q">
        <div class="final-slide">
          <div class="header">
            <h1>Questions?</h1>
          </div>

          <div class="qr">
            <canvas id="slides-qr-link" />
          </div>

          <div class="links">
            <ul>
              <li id="slides-link"></li>
              <li><a href="https://k6.io/docs/k6/latest/">k6 Documentation</a></li>
            </ul>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script type="module" src="/scripts/main.js"></script>
</body>

</html>
